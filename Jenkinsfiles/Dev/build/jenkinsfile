pipeline {
    agent {
        label 'EC2-Agent' 
    }

    options {
        timeout(time: 30, unit: 'MINUTES') // Set a timeout for the pipeline
        disableConcurrentBuilds() // Prevent concurrent builds
        ansiColor('xterm') // Enable ANSI color output in the console
    }

    environment {
        NODE_ENV = 'development' 
    }

    stages {
        stage('Welcome') {
            steps {
                script {
                    echo 'Welcome to the CI pipeline for the backend JavaScript application!'
                }
            }
        }

        stage('Install Dependencies') {
            steps {
                // Install dependencies with reduced output
                sh 'npm install --silent'
            }
        }
    }

    post {
        success {
            echo 'Pipeline completed successfully!'
        }
        failure {
            echo 'Pipeline failed. Please check the logs.'
        }
    }
}
